/* ========================================
   響應式設計 - 針對iPhone和各種裝置優化
   ======================================== */

/* 平板和小螢幕筆電 (最大寬度 1024px) */
@media (max-width: 1024px) {
    :root {
        --sidebar-width: 220px;
    }
    
    .content-wrapper {
        padding: 20px;
    }
}

/* 平板直向和大手機 (最大寬度 768px) */
@media (max-width: 768px) {
    .sidebar {
        transform: translateX(-100%);
    }
    
    .sidebar.active {
        transform: translateX(0);
    }
    
    .sidebar-toggle {
        display: block;
    }
    
    .main-content {
        margin-left: 0;
    }
    
    .mobile-menu-btn {
        display: block;
    }
    
    .top-header {
        padding: 0 15px;
    }
    
    .header-search {
        max-width: none;
    }
    
    .header-search input {
        font-size: 16px; /* 防止iOS自動縮放 */
    }
    
    .content-wrapper {
        padding: 15px;
    }
    
    .login-card {
        padding: 30px 25px;
    }
}

/* 手機裝置 (最大寬度 480px) - iPhone 優化 */
@media (max-width: 480px) {
    body {
        font-size: 14px;
    }
    
    .login-card {
        padding: 25px 20px;
    }
    
    .logo h1 {
        font-size: 28px;
    }
    
    .logo i {
        font-size: 36px;
    }
    
    .form-group input {
        font-size: 16px; /* 防止iOS自動縮放 */
        padding: 12px 14px;
    }
    
    .btn {
        padding: 12px 20px;
        font-size: 14px;
    }
    
    .top-header {
        height: 60px;
        padding: 0 12px;
    }
    
    .header-search {
        display: none; /* 在小螢幕隱藏搜尋欄 */
    }
    
    .header-actions {
        margin-left: auto;
    }
    
    .content-wrapper {
        padding: 12px;
    }
    
    .sidebar {
        width: 280px;
    }
    
    .sidebar-header {
        padding: 16px;
    }
    
    .nav-item {
        padding: 12px 20px;
        font-size: 14px;
    }
    
    .user-name {
        font-size: 13px;
    }
    
    .user-email {
        font-size: 11px;
    }
    
    .toast-container {
        top: 10px;
        right: 10px;
        left: 10px;
    }
    
    .toast {
        min-width: auto;
        width: 100%;
    }
}

/* iPhone 16 Pro Max 特別優化 (428px x 926px) */
@media (max-width: 430px) and (min-height: 900px) {
    .login-container {
        padding: 30px 20px;
    }
    
    .sidebar {
        width: 100%;
        max-width: 320px;
    }
}

/* iPhone 16 / 16 Pro 優化 (393px x 852px) */
@media (max-width: 395px) and (min-height: 800px) {
    .content-wrapper {
        padding-bottom: 20px;
    }
}

/* iPhone SE 和小螢幕裝置 (最大寬度 375px) */
@media (max-width: 375px) {
    .logo h1 {
        font-size: 24px;
    }
    
    .logo i {
        font-size: 32px;
    }
    
    .tagline {
        font-size: 13px;
    }
    
    .form-group label {
        font-size: 13px;
    }
    
    .form-group input {
        padding: 10px 12px;
    }
    
    .btn {
        padding: 10px 16px;
        font-size: 13px;
    }
    
    .platform-icons i {
        font-size: 24px;
    }
    
    .sidebar-header .logo span {
        font-size: 18px;
    }
    
    .nav-item {
        font-size: 13px;
    }
    
    .nav-item i {
        font-size: 16px;
    }
}

/* 橫向模式優化 */
@media (max-height: 600px) and (orientation: landscape) {
    .login-container {
        padding: 20px;
    }
    
    .login-card {
        padding: 20px;
        max-width: 500px;
    }
    
    .login-header {
        margin-bottom: 20px;
    }
    
    .form-group {
        margin-bottom: 15px;
    }
    
    .sidebar {
        transform: translateX(-100%);
    }
}

/* iOS Safari 特殊處理 */
@supports (-webkit-touch-callout: none) {
    /* iOS 特定樣式 */
    .form-group input,
    .header-search input {
        -webkit-appearance: none;
        appearance: none;
    }
    
    /* 防止iOS縮放 */
    input[type="text"],
    input[type="email"],
    input[type="password"],
    input[type="search"] {
        font-size: 16px !important;
    }
    
    /* iOS 安全區域適配 */
    .top-header {
        padding-left: max(15px, env(safe-area-inset-left));
        padding-right: max(15px, env(safe-area-inset-right));
    }
    
    .sidebar {
        padding-bottom: env(safe-area-inset-bottom);
    }
    
    .content-wrapper {
        padding-bottom: max(15px, env(safe-area-inset-bottom));
    }
}

/* 觸控設備優化 */
@media (hover: none) and (pointer: coarse) {
    /* 增大可點擊區域 */
    .btn,
    .nav-item,
    .header-btn {
        min-height: 44px; /* iOS建議的最小觸控目標 */
    }
    
    .form-group input {
        min-height: 44px;
    }
    
    /* 移除hover效果 */
    .btn:hover,
    .nav-item:hover,
    .header-btn:hover {
        transform: none;
    }
    
    /* 添加點擊反饋 */
    .btn:active,
    .nav-item:active,
    .header-btn:active {
        opacity: 0.7;
    }
}

/* 高解析度螢幕優化 (Retina 顯示器) */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    body {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
    
    .logo i,
    .nav-item i {
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
    }
}

/* Dark Mode 支援 (iOS 13+) */
@media (prefers-color-scheme: dark) {
    /* 可選：添加深色模式支援 */
    /* 目前保持原設計 */
}

/* 減少動畫 (iOS 輔助功能) */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* 卡片和面板的響應式優化 */
@media (max-width: 768px) {
    .card,
    .panel {
        border-radius: var(--border-radius-sm);
    }
    
    .grid-2,
    .grid-3,
    .grid-4 {
        grid-template-columns: 1fr;
    }
}

/* 表格響應式 */
@media (max-width: 768px) {
    table {
        display: block;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
}

/* 模態框響應式 */
@media (max-width: 768px) {
    .modal {
        padding: 10px;
    }
    
    .modal-content {
        width: 100%;
        max-width: none;
        margin: 0;
    }
}
